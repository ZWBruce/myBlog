{"version":3,"sources":["context.ts","components/Article/index.tsx","common/hooks/useAxios.ts","common/hooks/useGetParam.ts","common/hooks/useGetCtxt.ts","components/Articles/index.tsx","components/Card/index.tsx","components/ArticleList/index.tsx","components/CtgList/index.tsx","components/TagList/index.tsx","components/Layout/index.tsx","components/main/Main.tsx","components/Head/Head.tsx","components/category/index.tsx","components/tags/index.tsx","components/write/Write.tsx","components/gallary/index.tsx","components/ArticleInfo/index.tsx","App.tsx","components/toast/index.tsx","serviceWorker.ts","common/global/store.ts","index.tsx"],"names":["context","createContext","withRouter","props","data","useContext","img","useMemo","image","info","host","cata","console","log","category","className","src","alt","onClick","jump","id","category_name","title","useAxios","url","initState","useState","setInfo","useEffect","cancel","axios","get","cancelToken","CancelToken","c","then","res","key","match","params","Aricles","setUrl","list","count","map","t","defaultPageSize","onChange","page","defaultCurrent","total","connect","state","x","dayjs","y","duration","diff","articleCount","ctgCount","tagsCount","setList","format","useCallback","n","sortedArticle","time","tags","ind","tag_name","useGetParam","ctxt","useGetCtxt","ctgList","noLimit","slice","inCtg","location","pathname","history","push","curCategory","filter","card","e","preventDefault","href","style","visibility","inTags","tagsList","React","Children","children","child","text","to","activeClassName","curTag","length","Option","TextArea","initalSate","content","ctg","reducer","action","val","type","every","add_tag","add_ctg","useReducer","dispatch","tag","setTag","setCtg","setImg","imgRef","useRef","change","target","value","addTag","fd","FormData","append","method","split","onChange1","name","onBlur","onSearch","placeholder","tagId","join","ref","images","current","files","height","width","display","showSearch","optionFilterProp","filterOption","input","option","toLowerCase","indexOf","color","closable","onClose","source","Gallary","imgs","setImgs","str","ipt","document","createElement","body","appendChild","select","execCommand","removeChild","showToast","copy","ArticleInfo","showTitle","trim","getArticleList","a","getTagsList","getCtgList","routes","path","cmp","Main","Catagory","Tags","Write","component","exact","from","Toast","timer","show","msg","bind","clearTimeout","this","setState","stopTimer","setTimeout","ReactDOM","createPortal","Component","Boolean","window","hostname","initalState","articleList","createStore","sorted","sort","b","applyMiddleware","thunk","isLeapYear","con","globalData","render","store","Provider","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.e4c6d33f.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nexport const context = createContext<any>({})\n","import React, { useContext, useMemo, useEffect } from 'react'\nimport { context } from '@/context'\nimport { withRouter } from 'react-router-dom'\nimport './index.less'\n\nfunction Article(props: any) {\n  const data: any = useContext(context)\n\n  const img = useMemo(() => {\n    let image = props.info.img\n    return image ? image : `${data.host}/files/download?name=1.jpg`\n  }, [data.host, props.info.img])\n\n  const cata = useMemo(() => {\n    console.log('article item props.info', props.info)\n    return props.info.category\n  }, [props.info])\n\n  return <div className=\"article-wrap card-bg\">\n    <img src={img} alt=\"\" />\n    <div className=\"content-wrap\">\n      <div className=\"notice mb-7\">\n        <span>1天前</span>\n        <span onClick={() => { data.jump(props, cata && cata.id, 'catagory') }} className=\"link\">{cata && cata.category_name}</span>\n      </div>\n      <h1 className=\"title link\" onClick={() => { data.jump(props, props.info.id) }}>\n        {props.info.title}\n      </h1>\n    </div>\n  </div>\n}\n\nexport default withRouter(Article)","import { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nexport default function useAxios(url: string, initState: any = {}) {\n  const [info, setInfo] = useState(initState)\n  useEffect(() => {\n    let cancel: any = null\n    axios.get(url, {\n      cancelToken: new axios.CancelToken(c => {\n        cancel = c\n      })\n    }).then((res: any) => {\n      res = res.data\n      setInfo(res)\n    })\n    return () => {\n      cancel()\n    }\n  }, [url])\n\n  return info\n}","import { useMemo } from 'react'\n\nexport default function (props: any, key: string = 'id') {\n  const data = useMemo(() => props.match.params[key], [key, props.match.params])\n  return data\n}","import { useContext } from 'react'\nimport { context } from '@/context'\n\nexport default function () {\n  const ctxt = useContext(context)\n  return ctxt\n}","import React, { useState, useEffect } from 'react'\nimport Article from '@c/Article'\nimport { Pagination } from 'antd'\nimport { useAxios } from '@/common/hooks'\n\nexport default function Aricles(props: any) {\n  const [url, setUrl] = useState<string>(props.url)\n  let { list, count } = useAxios(url, { list: [], count: 0 })\n\n  function onChange(page: number) {\n    setUrl((url: string) => `${url}?page=${page}`)\n  }\n\n  return <>\n    {\n      list.map((t: any) => {\n        return <Article info={t} key={t.id} />\n      })\n    }\n    <div className=\"pag-wraper\">\n      <Pagination\n        defaultPageSize={10}\n        onChange={onChange}\n        defaultCurrent={1}\n        total={count || 11}\n      />\n    </div>\n  </>\n}\n","import React, { useContext } from 'react'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport './index.less'\nimport dayjs from 'dayjs'\n\nfunction Card(props: any) {\n  const data: any = useContext(context)\n  let x = dayjs()\n  let y = dayjs(1598195948672)\n\n  console.log('dayjs', dayjs.duration(x.diff(y)))\n\n  return <div className=\"card-content card-bg\">\n    <img src={`${data.host}/files/download?name=1.jpg`} alt=\"\" />\n    <span className=\"name\">凉城</span>\n    <span>不负初心，方得始终</span>\n    <nav className=\"level\">\n      <div className=\"level-item link\" onClick={() => { data.jump(props, '', 'index') }}>\n        <p className=\"heading\">\n          文章\n        </p>\n        <p className=\"title\">\n          {props.articleCount}\n        </p>\n      </div>\n      <div className=\"level-item link\" onClick={() => { data.jump(props, 0, 'catagory') }}>\n        <p className=\"heading\">\n          分类\n        </p>\n        <p className=\"title\">\n          {props.ctgCount}\n        </p>\n      </div>\n      <div className=\"level-item link\" onClick={() => { data.jump(props, 0, 'tags') }}>\n        <p className=\"heading\">\n          标签\n        </p>\n        <p className=\"title\">\n          {props.tagsCount}\n        </p>\n      </div>\n\n    </nav>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(Card))","import React, { useContext, useState, useEffect, useCallback } from 'react'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport dayjs from 'dayjs'\nimport './index.less'\n\nfunction ArticleList(props: any) {\n  const data: any = useContext(context)\n\n  const [list, setList] = useState<any[]>([])\n\n  const format = useCallback((n: string | number) => {\n    n = +n\n    return dayjs(n).format('YYYY-MM-DD HH:mm:ss')\n  }, [])\n\n  useEffect(() => {\n    setList(props.sortedArticle)\n  }, [props.sortedArticle])\n\n  return <div className=\"list-wrap card-bg\">\n    <div className=\"notice mb-10\">\n      最新文章\n    </div>\n    <div>\n      {\n        list.map(t => <div className=\"item-wrap\" key={t.id}>\n          <img src={t.img || `${data.host}/files/download?name=1.jpg`} alt={t.title} />\n          <div className=\"item-right\">\n            <div className=\"date notice\">{format(t.time)}</div>\n            <div className=\"title link\" onClick={() => { data.jump(props, t.id) }}>{t.title}</div>\n            <div className=\"tag-wrap\">\n              {\n                t.tags.map((t: any, ind: number) =>\n                  <div className=\"tag notice link\" key={ind} onClick={() => { data.jump(props, t.id, 'tags') }}>\n                    {t.tag_name}\n                  </div>)\n              }\n            </div>\n          </div>\n        </div>)\n      }\n    </div>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(ArticleList))","import React, { useMemo } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { useGetParam, useAxios, useGetCtxt } from '@/common/hooks'\nimport Articles from '@c/Articles'\nimport './index.less'\n\nfunction CtgList(props: any) {\n  const id = useGetParam(props) || 0\n  const ctxt = useGetCtxt()\n  let { list: articleList, count } = useAxios(`${ctxt.host}/category/articles/${id}`)\n  const list = useMemo(() => {\n    let { ctgList } = props\n    if (props.noLimit) {\n      return ctgList\n    }\n    return ctgList.slice(0, 7)\n  }, [props])\n\n  const inCtg = useMemo(() => {\n    return props.location.pathname === '/catagory/0'\n  }, [props.location.pathname])\n\n  function jump(id: number = 0) {\n    console.log('jump', '/catagory/' + id, props.location.pathname)\n    if (props.location.pathname !== '/catagory/' + id) {\n      props.history.push('/catagory/' + id)\n    }\n  }\n\n  const curCategory = useMemo(() => {\n    const cur = list.filter((t: any) => +t.id === +id)\n    return cur[0] || {}\n  }, [id, list])\n  console.log(props.card, curCategory, props.card || curCategory)\n  return <div className=\"ctg-wrap card-bg\">\n    {\n      props.card || !curCategory.category_name ?\n        <>\n          <div className=\"notice mb-10 card-head\">\n            <span>分类</span><a onClick={(e) => { e.preventDefault(); jump() }} href=\"890\" style={{ visibility: inCtg ? 'hidden' : 'visible' }}>查看更多</a>\n          </div>\n          <ul>\n            {\n              list.map((t: any) => <li className=\"item-wrap\" key={t.id} onClick={() => jump(t.id)}>\n                <span>{t.category_name}</span>\n                <span>{t.count}</span>\n              </li>)\n            }\n          </ul>\n        </>\n        :\n        <>\n          <div>当前位置: <span className=\"link\" onClick={() => { props.history.push('/catagory/0') }}>分类</span> / {curCategory.category_name}</div>\n          <Articles url={`${ctxt.host}/category/articles/${id}`} />\n        </>\n\n    }\n\n  </div>\n}\n\nexport default connect((state, props) => ({ ...state, ...props }))(withRouter(CtgList))","import React, { useMemo } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport './index.less'\n\nfunction TagList(props: any) {\n  const inTags = useMemo(() => {\n    return props.location.pathname === '/tags/0'\n  }, [props.location.pathname])\n\n  function jump(id = 0) {\n    if (props.location.pathname === '/tags/' + id) return\n\n    props.history.push('/tags/' + id)\n  }\n\n  return <div className=\"tag-wrap card-bg\">\n    <div className=\"notice mb-10 card-head\">\n      <span>标签</span>\n      <a onClick={(e) => { e.preventDefault(); jump() }} href=\"123\" style={{ visibility: inTags ? 'hidden' : 'visible' }}>查看更多</a>\n    </div>\n    <ul>\n      {\n        props.tagsList.map((t: any) => <li className=\"item-wrap\" key={t.id}>\n          <a onClick={(e) => { e.preventDefault(); jump(t.id) }} href=\"123\">{t.tag_name}</a>\n        </li>)\n      }\n    </ul>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(TagList))","import React from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@c/Card'\nimport ArticleList from '@c/ArticleList'\nimport CtgList from '@/components/CtgList'\nimport TagList from '@/components/TagList'\n\nfunction Layout(props: any) {\n  return <div className='app main-wrapp'>\n    <div className=\"flex-left\">\n      <Card />\n      <CtgList card={true} />\n      <TagList />\n    </div>\n    <div className=\"flex-center\">\n      {\n        React.Children.map(props.children, (child: any) => <>{child}</>)\n      }\n    </div>\n    <div className=\"flex-right\">\n      <ArticleList />\n    </div>\n\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(Layout)","import React from 'react'\nimport { connect } from 'react-redux'\nimport Articles from '@c/Articles'\nimport Layout from '@c/Layout'\nimport { useGetCtxt } from '@/common/hooks'\n\nfunction Main() {\n  const ctxt = useGetCtxt()\n\n  return <Layout>\n    <Articles url={`${ctxt.host}/articles/list`} />\n  </Layout>\n}\n\nexport default connect(state => ({ ...state }))(Main)","import React, { ReactChild, useState } from 'react'\nimport { NavLink } from 'react-router-dom'\nimport './Head.less'\n\nexport default function (props: { children: ReactChild }) {\n  let links = [{\n    text: '主页',\n    url: '/index'\n  },\n  {\n    text: '分类',\n    url: '/catagory/0'\n  },\n  {\n    text: '标签',\n    url: '/tags/0'\n  }\n  ]\n\n  if (process.env.NODE_ENV === 'development') {\n    links.push({\n      text: '写文章',\n      url: '/write'\n    }, {\n      text: '图库',\n      url: '/pic'\n    })\n  }\n\n  return <nav className=\"app-header\">\n    <div className=\"app app-inner-header\">\n      {\n        React.Children.map(props.children, child => {\n          return <div>{child}</div>\n        })\n      }\n      <div className=\"links\">\n        {\n          links.map(({ url, text }, ind) => {\n            return <NavLink to={url} key={ind} activeClassName=\"active\">{text}</NavLink>\n          })\n        }\n      </div>\n    </div>\n  </nav>\n}","import React from 'react'\nimport Layout from '@c/Layout'\nimport CtgList from '@c/CtgList'\nimport { connect } from 'react-redux'\n\nfunction Category(props: any) {\n\n  return <Layout>\n    <CtgList />\n  </Layout>\n}\n\nexport default connect((state, props) => ({ ...state, ...props }))(Category)","import React, { useMemo } from 'react'\nimport Layout from '@c/Layout'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { useGetParam, useAxios, useGetCtxt } from '@/common/hooks'\nimport Articles from '@c/Articles'\n\nfunction Tags(props: any) {\n  const id = useGetParam(props) || 0\n  const ctxt = useGetCtxt()\n  let { list, count } = useAxios(`${ctxt.host}/tags/articles/${id}`)\n  function jump(id = 0) {\n    if (props.location.pathname === '/tags/' + id) return\n\n    props.history.push('/tags/' + id)\n  }\n\n  const curTag = useMemo(() => {\n    let tag = props.tagsList.filter((t: any) => +t.id === +id)\n    return tag[0]\n  }, [id, props.tagsList])\n  console.log(curTag, props.tagsList)\n\n  return <Layout>\n    <div className=\"ctg-wrap card-bg\">\n      {\n        curTag ?\n          <div>当前位置: <span className=\"link\" onClick={() => { props.history.push('/tags/0') }}>标签</span> / {curTag.tag_name}</div>\n          :\n          <>\n            <div className=\"notice mb-10\">\n              标签\n            </div>\n            <ul>\n              {\n                props.tagsList.map((t: any) => <li className=\"item-wrap\"\n                  key={t.id} onClick={() => { jump(t.id) }}\n                >\n                  <span>{t.tag_name}</span>\n                  <span>{t.tag_name.length}</span>\n                </li>)\n              }\n            </ul>\n          </>\n      }\n\n      {\n        id && list && list.length ? <Articles url={`${ctxt.host}/tags/articles/${id}`} /> : ''\n      }\n    </div>\n  </Layout>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(Tags))","import React, { useState, useReducer, useEffect, useCallback, useRef, useContext } from 'react'\nimport { Button, Input, Select, Tag } from 'antd'\nimport axios from 'axios'\nimport './Write.less'\nimport MarkDown from 'react-markdown'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\n\nconst { Option } = Select\n\nconst { TextArea } = Input\n\ninterface Act {\n  type: string;\n  val?: any\n}\n\nconst initalSate = { title: '', content: '', tags: [], img: '', ctg: {} }\n\nfunction reducer(state: any, action: Act) {\n  let { tags } = state\n  const { val } = action\n  switch (action.type) {\n    case 'changeTitle':\n      return { ...state, title: val }\n    case 'changeContent':\n      return { ...state, content: val }\n    case 'ADD_TAG':\n      tags.every((t: any) => t.id !== val.id) && tags.push(val)\n      return {\n        ...state,\n        tags: [...tags]\n      }\n    case 'REMOVE_TAG':\n      tags = tags.filter((t: any) => t.id !== val)\n      return {\n        ...state,\n        tags: [...tags]\n      }\n    case 'CHANGE_IMG':\n      return {\n        ...state,\n        img: val\n      }\n    case 'GET_CTG':\n      return {\n        ...state,\n        ctg: val\n      }\n    case 'REMOVE_CTG':\n      return {\n        ...state,\n        ctg: ''\n      }\n    default:\n      return state\n  }\n}\n\nfunction Write(props: any) {\n\n  const [state, dispatch] = useReducer(reducer, initalSate)\n  const [tag, setTag] = useState('')\n  const [ctg, setCtg] = useState('')\n  const [img, setImg] = useState('')\n  const data = useContext(context)\n  const imgRef = useRef(null)\n\n  function change(e: any, type = 'changeTitle') {\n    dispatch({\n      type,\n      val: e.target.value\n    })\n  }\n\n\n\n  function uploadImg() {\n    const imgDom = imgRef.current as unknown\n    const images: any = (imgDom as HTMLInputElement).files\n    const fd = new FormData()\n    fd.append('image', images[0])\n    fd.append('msg', 'abcd')\n    axios(\n      {\n        url: `${data.host}/upload`,\n        method: 'post',\n        data: fd\n      }\n    ).then(res => {\n      console.log(res)\n      const url = data.host + res.data.data\n      dispatch({\n        type: 'CHANGE_IMG',\n        val: url\n      })\n    })\n  }\n\n  function addTag(type = 'tags') {\n    if ((type === 'tags' && !tag) || (type === 'category' && !ctg)) return\n    const url = `${data.host}/${type}/add`\n    const fd = new FormData()\n    if (type === 'tags') fd.append('name', tag)\n    if (type === 'category') fd.append('name', ctg)\n    axios({\n      url,\n      method: 'post',\n      data: fd\n    }).then(({ data }) => {\n      console.log(data)\n      if (type === 'tags') {\n        props.add_tag(data)\n      }\n      if (type === 'category') {\n        props.add_ctg(data)\n      }\n    })\n  }\n\n  function upload() {\n    if (!state.title || !state.content) {\n\n      return\n    }\n    const url = `${data.host}/articles/send`\n    const fd = new FormData()\n    fd.append('title', state.title)\n    fd.append('content', state.content)\n    const tagId = state.tags.map((t: any) => t.id)\n    fd.append('tag_id', tagId.join())\n    fd.append('img', state.img)\n    fd.append('category', state.ctg.id)\n    axios({\n      url,\n      method: 'post',\n      data: fd\n    }).then(res => {\n      console.log(res)\n    })\n  }\n\n  const onChange = useCallback((value) => {\n    let tag_name = value.split('$_$')[0]\n    const id = value.split('$_$')[1]\n    dispatch({\n      type: 'ADD_TAG',\n      val: {\n        tag_name,\n        id\n      }\n    })\n  }, [])\n\n  const onChange1 = useCallback((value) => {\n    let tag_name = value.split('$_$')[0]\n    dispatch({\n      type: 'GET_CTG',\n      val: {\n        name: tag_name,\n        id: value.split('$_$')[1]\n      }\n    })\n  }, [])\n\n  function closeTag(id: number) {\n    dispatch({\n      type: 'REMOVE_TAG',\n      val: id\n    })\n  }\n\n  function closeCtg() {\n    dispatch({\n      type: 'REMOVE_CTG',\n    })\n  }\n\n  const onBlur = useCallback(() => {\n    console.log('blur')\n  }, [])\n\n  const onSearch = useCallback((val) => {\n    console.log('search', val)\n  }, [])\n\n  return <div className=\"write-wrap\">\n    <div className=\"flex\">\n      <Input value={state.title} onChange={(e) => change(e)} placeholder='文章标题' />\n      <Button type=\"primary\" onClick={upload}>上传文章</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={tag} onChange={(e) => { setTag(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => { addTag() }}>新增标签</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={ctg} onChange={(e) => { setCtg(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => { addTag('category') }}>新增分类</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"file\" ref={imgRef} />\n      <Button type=\"primary\" onClick={uploadImg}>上传图片</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={img} onChange={(e) => { setImg(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => {\n        dispatch({\n          type: 'CHANGE_IMG',\n          val: img\n        })\n      }}>使用已有图片</Button>\n    </div>\n    <img src={state.img} alt=\"封面图片\" style={{ height: state.img ? '100px' : '0px', width: 'auto', visibility: state.img ? 'visible' : 'hidden', display: 'block' }} />\n    <Select\n      showSearch\n      style={{ width: 200 }}\n      placeholder=\"Select a tag\"\n      optionFilterProp=\"children\"\n      onChange={onChange}\n      onBlur={onBlur}\n      onSearch={onSearch}\n      filterOption={(input, option) =>\n        (option as any).children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n    >\n      {\n        props.tagsList.map((t: any) => <Option value={`${t.tag_name}$_$${t.id}`} key={t.id}>{t.tag_name}</Option>)\n      }\n    </Select>\n    {\n      state.tags.map((t: any) => <Tag color=\"#2db7f5\" key={t.id} closable onClose={() => { closeTag(t.id) }}>\n        {t.tag_name}\n      </Tag>)\n    }\n    <br />\n    <Select\n      showSearch\n      style={{ width: 200 }}\n      placeholder=\"Select a 分类\"\n      optionFilterProp=\"children\"\n      onChange={onChange1}\n      onBlur={onBlur}\n      onSearch={onSearch}\n      filterOption={(input, option) =>\n        (option as any).children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n    >\n      {\n        props.ctgList.map((t: any) => <Option value={`${t.category_name}$_$${t.id}`} key={t.id}>{t.category_name}</Option>)\n      }\n    </Select>\n    {\n      state.ctg.name ?\n        <Tag color=\"#2db7f5\" closable onClose={() => { closeCtg() }}>\n          {state.ctg.name}\n        </Tag> : ''\n    }\n    <br />\n    <div className=\"flex content\">\n      <div className=\"inner-content\">\n        <TextArea value={state.content} onChange={(e) => change(e, 'changeContent')} placeholder='文章内容' />\n      </div>\n      <div className=\"inner-content\">\n        <MarkDown source={state.content} />\n      </div>\n    </div>\n\n  </div>\n}\n\nexport default connect(state => ({ ...state }), {\n  add_tag(val: any) {\n    return { type: 'ADD_TAG', val }\n  },\n  add_ctg(val: any) {\n    return { type: 'ADD_CTG', val }\n  }\n})(Write)","import React, { useState, useEffect, useContext } from 'react'\nimport { context } from '@/context'\nimport axios from 'axios'\nimport './index.less'\n\nexport default function Gallary() {\n  const ctxt = useContext(context)\n  const [imgs, setImgs] = useState([])\n  useEffect(() => {\n    axios.get(`${ctxt.host}/files/ls`).then(({ data }) => {\n      setImgs(data.list.map((t: any) => ctxt.host + t.name))\n    })\n  }, [ctxt.host])\n\n  function copy(str: string) {\n    const ipt = document.createElement('input')\n    ipt.value = str\n    document.body.appendChild(ipt)\n    ipt.select()\n    document.execCommand('copy')\n    document.body.removeChild(ipt)\n    ctxt.showToast('拷贝图片地址成功')\n  }\n\n  return <div className=\"gallary-wrap\">\n    <h1>图库</h1>\n    <div className=\"inner-wrap\">\n      {\n        imgs.map((t: string, ind: number) => <div key={ind} className=\"img-wrap\">\n          <img src={t} alt={t} />\n          <br />\n          <span onClick={() => { copy(t) }}>{t}</span>\n        </div>)\n      }\n    </div>\n  </div>\n}","import React, { useEffect, useContext, useState, useMemo } from 'react'\nimport './index.less'\nimport { context } from '@/context'\nimport Layout from '@c/Layout'\nimport axios from 'axios'\nimport MarkDown from 'react-markdown'\nimport useAxios from '@/common/hooks/useAxios'\n\nfunction ArticleInfo(props: any) {\n  const ctxt = useContext(context)\n\n  const id = useMemo(() => props.match.params.id, [props.match.params.id])\n  const info = useAxios(`${ctxt.host}/articles/${id}`, { content: '', title: '', time: 0 })\n\n  const showTitle = useMemo(() => {\n    let { content } = info\n    return !content.trim().match(/^#\\s/)\n  }, [info])\n\n  return <Layout>\n    <div className=\"article-info-wrap card-bg\">\n      <h1 style={{ display: showTitle ? 'block' : 'none' }}>{info.title}</h1>\n      <MarkDown source={info.content} />\n    </div>\n  </Layout>\n}\n\nexport default ArticleInfo\n","import React, { useContext, useEffect, useMemo } from 'react';\nimport Main from '@c/main/Main'\nimport Head from '@c/Head/Head'\nimport Catagory from '@c/category/index'\nimport Tags from '@c/tags/index'\nimport Write from '@c/write/Write'\nimport Gallary from '@c/gallary'\nimport ArticleInfo from '@c/ArticleInfo'\nimport { HashRouter, Route, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport { context } from '@/context'\nimport './App.less';\nimport '@/Main.less'\n\nfunction App(props: any) {\n  const ctxt = useContext(context)\n  const routes = useMemo(() => {\n    return [\n      { path: '/index', cmp: Main },\n      { path: '/catagory/:id', cmp: Catagory },\n      { path: '/tags/:id', cmp: Tags },\n      { path: '/write', cmp: Write },\n      { path: '/pic', cmp: Gallary },\n      { path: '/article/:id', cmp: ArticleInfo }\n    ]\n  }, [])\n\n  useEffect(() => {\n    props.getArticleList(ctxt.host)\n    props.getTagsList(ctxt.host)\n    props.getCtgList(ctxt.host)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <HashRouter>\n      <Head>\n        <span></span>\n      </Head>\n      <div className='app'>\n        {\n          routes.map((t: any, ind: number) => <Route path={t.path} component={t.cmp} key={ind} />)\n        }\n        <Redirect exact from='/' to='/index' />\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default connect(\n  (state) => ({ ...state }),\n  {\n    getArticleList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/articles`)\n        dispatch({\n          type: 'GET_ARTICLE_LIST',\n          val: data\n        })\n      }\n    },\n    getTagsList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/tags`)\n        dispatch({\n          type: 'GET_TAGS_LIST',\n          val: data\n        })\n      }\n    },\n    getCtgList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/category/count`)\n        dispatch({\n          type: 'GET_CTG_LIST',\n          val: data\n        })\n      }\n    }\n  }\n)(App);\n","import { clear } from 'console';\nimport React, { useState, useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom';\nimport './index.less'\n\n//  function (props: any) {\n//   let timer = useRef<any>(null)\n\n//   const [show, setShow] = useState(props.show)\n//   console.log('props.show', props.show)\n//   useEffect(() => {\n//     console.log('show', show)\n//     if (show) {\n//       timer.current = setTimeout(() => {\n//         setShow(false)\n//       }, 2000)\n//     }\n//   }, [show])\n\n//   useEffect(() => {\n//     clearTimeout(timer.current)\n//     timer.current = setTimeout(() => {\n//       setShow(false)\n//     }, 2000)\n//   }, [props.msg])\n\n//   return ReactDOM.createPortal(<div\n//     className=\"toast\" style={{ display: show ? 'block' : 'none' }}\n//   >\n//     {props.msg}\n//   </div>, document.body)\n// }\n\nexport default class Toast extends React.Component<any, any> {\n\n  private timer: any = null\n  constructor(props: any) {\n    super(props)\n    this.state = {\n      show: false,\n      msg: ''\n    }\n    // @ts-ignore \n    Toast.showToast = this.show.bind(this)\n  }\n\n  public show(msg: string) {\n    clearTimeout(this.timer)\n\n    this.setState({\n      show: true,\n      msg\n    }, () => {\n      this.stopTimer()\n    })\n  }\n\n  private stopTimer() {\n    this.timer = setTimeout(() => {\n      this.setState({\n        show: false\n      })\n    }, 2000)\n  }\n\n  render() {\n    return ReactDOM.createPortal(<div\n      className=\"toast\" style={{ display: this.state.show ? 'block' : 'none' }}\n    >\n      {this.state.msg}\n    </div>, document.body)\n  }\n}\n\n/**\n * {\n      React.Children.map(props.children, child => <div>\n          {child}\n        </div>)\n    }\n */","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\ninterface Act {\n  type: string;\n  val?: any\n}\n\nconst initalState: any = {\n  count: 1,\n  articleCount: 0,\n  tagsCount: 0,\n  ctgCount: 0,\n  articleList: [],\n  tagsList: [],\n  sortedArticle: [],\n  ctgList: []\n}\n\nfunction reducer(state = initalState, action: Act) {\n  let { type, val } = action\n  let { tagsList, ctgList } = state\n  switch (type) {\n    case 'ADD':\n      return {\n        ...state,\n        count: state.count + 1\n      };\n    case 'GET_ARTICLE_LIST':\n      let sorted = val.list.sort((b: any, a: any) => a.time - b.time).slice(0, 5)\n      return {\n        ...state,\n        articleCount: val.count,\n        articleList: val.list,\n        sortedArticle: sorted,\n      }\n    case 'GET_TAGS_LIST':\n      return {\n        ...state,\n        tagsCount: val.count,\n        tagsList: val.list\n      }\n    case 'ADD_TAG':\n      tagsList.push(val)\n      console.log({ tagsList })\n      return {\n        ...state,\n        tagsList: [...tagsList]\n      }\n    case 'GET_CTG_LIST':\n      return {\n        ...state,\n        ctgCount: val.count,\n        ctgList: val.list\n      }\n    case 'ADD_CTG':\n      ctgList.push(val)\n      console.log({ ctgList })\n      return {\n        ...state,\n        ctgList: [...ctgList]\n      }\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, applyMiddleware(thunk))","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Toast from '@c/toast'\nimport * as serviceWorker from './serviceWorker';\nimport { context } from './context'\nimport * as dayjs from 'dayjs'\nimport isLeapYear from 'dayjs/plugin/isLeapYear' // 导入插件\nimport 'dayjs/locale/zh-cn' // 导入本地化语言\nimport duration from 'dayjs/plugin/duration'\nimport { Provider } from 'react-redux'\nimport store from '@/common/global/store'\n\ndayjs.extend(duration)\n\ndayjs.extend(isLeapYear) // 使用插件\ndayjs.locale('zh-cn') // 使用本地化语言\n\nconst con = document.createElement('div')\ncon.id = 'cmp-container'\ndocument.body.appendChild(con)\n\nconst host = process.env.NODE_ENV === 'development' ? 'http://localhost:8090' : 'http://39.96.31.138'\nconst globalData = {\n  host,\n  dayjs,\n  showToast(msg: string) {\n    const cmp: any = Toast\n    cmp.showToast(msg)\n  },\n  jump(props: any, id: number | string, type: string = 'article') {\n    props.history.push(`/${type}${id !== '' ? '/' + id : ''}`)\n  }\n}\n\nReactDOM.render(\n  <Provider store={store}>\n    <context.Provider value={globalData} >\n      <App />\n    </context.Provider>\n    <Toast />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}