{"version":3,"sources":["context.ts","components/Article/index.tsx","common/hooks/useAxios.ts","common/hooks/useGetParam.ts","common/hooks/useGetCtxt.ts","components/Articles/index.tsx","components/Card/index.tsx","components/ArticleList/index.tsx","components/CtgList/index.tsx","components/TagList/index.tsx","components/Layout/index.tsx","components/main/Main.tsx","components/Head/Head.tsx","components/category/index.tsx","components/tags/index.tsx","components/write/Write.tsx","components/gallary/index.tsx","components/ArticleInfo/index.tsx","App.tsx","components/toast/index.tsx","serviceWorker.ts","common/global/store.ts","index.tsx"],"names":["context","createContext","withRouter","props","data","useContext","img","useMemo","image","info","host","cata","category","format","useCallback","url","id","axios","get","then","res","console","log","n","dayjs","className","src","alt","time","onClick","jump","category_name","title","reducer","state","action","val","type","useAxios","initState","fn","useReducer","dispatch","useEffect","cancel","cancelToken","CancelToken","c","key","match","params","Aricles","useState","setUrl","list","count","map","t","defaultPageSize","onChange","page","defaultCurrent","total","connect","articleCount","ctgCount","tagsCount","setList","sortedArticle","tags","ind","tag_name","useGetParam","ctxt","useGetCtxt","ctgList","noLimit","slice","inCtg","location","pathname","history","push","curCategory","filter","card","e","preventDefault","href","style","visibility","inTags","tagsList","inArticle","startsWith","width","React","Children","children","child","text","to","activeClassName","curTag","articles","length","Option","TextArea","initalSate","content","ctg","every","add_tag","add_ctg","tag","setTag","setCtg","setImg","imgRef","useRef","change","target","value","addTag","fd","FormData","append","method","split","onChange1","name","placeholder","tagId","join","ref","images","current","files","height","display","showSearch","optionFilterProp","filterOption","input","option","toLowerCase","indexOf","color","closable","onClose","closeTag","source","Gallary","imgs","setImgs","str","ipt","document","createElement","body","appendChild","select","execCommand","removeChild","showToast","copy","ArticleInfo","showTitle","trim","getArticleList","a","getTagsList","getCtgList","routes","path","cmp","Main","Catagory","Tags","Write","component","exact","from","Toast","timer","show","msg","bind","clearTimeout","this","setState","stopTimer","setTimeout","ReactDOM","createPortal","Component","Boolean","window","hostname","initalState","articleList","createStore","sorted","sort","b","applyMiddleware","thunk","duration","isLeapYear","con","globalData","render","store","Provider","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"8iBAEaA,EAAUC,wBAAmB,I,iDCuD3BC,mBAlDf,SAAiBC,GACf,IAAMC,EAAYC,qBAAWL,GAEvBM,EAAMC,mBAAQ,WAClB,IAAIC,EAAQL,EAAMM,KAAKH,IACvB,OAAOE,GAAK,UAAcJ,EAAKM,KAAnB,gCACX,CAACN,EAAKM,KAAMP,EAAMM,KAAKH,MAEpBK,EAAOJ,mBAAQ,WACnB,OAAOJ,EAAMM,KAAKG,WACjB,CAACT,EAAMM,OAYJI,GAVYC,uBAChB,WACE,IAAMC,EAAG,UAAMX,EAAKM,KAAX,4BAAmCP,EAAMM,KAAKO,IACvDC,IAAMC,IAAIH,GAAKI,MAAK,SAACC,GACnBC,QAAQC,IAAIF,EAAIhB,WAGpB,CAACA,EAAKM,KAAMP,EAAMM,KAAKO,KAGVF,uBAAY,SAACS,GAE1B,OADAA,GAAKA,EACEC,IAAMD,GAAGV,OAAO,sBACtB,KAEH,OAAO,yBAAKY,UAAU,wBACpB,yBAAKC,IAAKpB,EAAKqB,IAAI,KACnB,yBAAKF,UAAU,gBACb,yBAAKA,UAAU,eACb,8BAAOZ,EAAOV,EAAMM,KAAKmB,OACzB,0BAAMC,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAOQ,GAAQA,EAAKK,GAAI,aAAeS,UAAU,QAAQd,GAAQA,EAAKoB,eAOpG,IAIL,wBAAIN,UAAU,aAAaI,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAOA,EAAMM,KAAKO,MACrEb,EAAMM,KAAKuB,YC9CpB,SAASC,EAAQC,EAAYC,GAAc,IACjCC,EAAQD,EAARC,IACR,OAAQD,EAAOE,MACb,IAAK,aACH,OAAO,eAAKD,GACd,QACE,OAAOF,GAIE,SAASI,EAASvB,GAAsD,IAAzCwB,EAAwC,uDAAvB,GAAIC,EAAmB,uDAAV,aAAU,EAC3DC,qBAAWR,EAASM,GADuC,mBAC7E9B,EAD6E,KACvEiC,EADuE,KAqBpF,OAnBAC,qBAAU,WAER,IAAIC,EAAc,KAalB,OAZA3B,IAAMC,IAAIH,EAAK,CACb8B,YAAa,IAAI5B,IAAM6B,aAAY,SAAAC,GACjCH,EAASG,OAEV5B,MAAK,SAACC,GACPA,EAAMA,EAAIhB,KACVsC,EAAS,CACPL,KAAM,aACND,IAAKhB,IAEPoB,EAAG,eAAIpB,OAEF,WACLwB,OAED,CAAC7B,IACGN,EClCM,eAAUN,GAAiC,IAArB6C,EAAoB,uDAAN,KAC3C5C,EAAOG,mBAAQ,kBAAMJ,EAAM8C,MAAMC,OAAOF,KAAM,CAACA,EAAK7C,EAAM8C,MAAMC,SACtE,OAAO9C,GCDM,aAEb,OADaC,qBAAWL,ICCX,SAASmD,EAAQhD,GAAa,IAAD,EACpBiD,mBAAiBjD,EAAMY,KADH,mBACnCA,EADmC,KAC9BsC,EAD8B,KAG1CV,qBAAU,WACRU,EAAOlD,EAAMY,OACZ,CAACZ,EAAMY,MALgC,MAQpBuB,EAASvB,EAAK,CAAEuC,KAAM,GAAIC,MAAO,IAAjDD,EARoC,EAQpCA,KAAMC,EAR8B,EAQ9BA,MAMZ,OAAO,oCAEHD,EAAKE,KAAI,SAACC,GACR,OAAO,kBAAC,EAAD,CAAShD,KAAMgD,EAAGT,IAAKS,EAAEzC,QAGpC,yBAAKS,UAAU,cACb,uBACEiC,gBAAiB,GACjBC,SAbN,SAAkBC,GAChBP,GAAO,SAACtC,GAAD,gBAAoBA,EAApB,iBAAgC6C,OAanCC,eAAgB,EAChBC,MAAOP,GAAS,O,OCaTQ,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,CAAiC7D,aArChD,SAAcC,GACZ,IAAMC,EAAYC,qBAAWL,GAE7B,OAAO,yBAAKyB,UAAU,wBACpB,yBAAKC,IAAG,UAAKtB,EAAKM,KAAV,8BAA4CiB,IAAI,KACxD,0BAAMF,UAAU,QAAhB,gBACA,wFACA,yBAAKA,UAAU,SACb,yBAAKA,UAAU,kBAAkBI,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAO,GAAI,WACrE,uBAAGsB,UAAU,WAAb,gBAGA,uBAAGA,UAAU,SACVtB,EAAM6D,eAGX,yBAAKvC,UAAU,kBAAkBI,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAO,EAAG,cACpE,uBAAGsB,UAAU,WAAb,gBAGA,uBAAGA,UAAU,SACVtB,EAAM8D,WAGX,yBAAKxC,UAAU,kBAAkBI,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAO,EAAG,UACpE,uBAAGsB,UAAU,WAAb,gBAGA,uBAAGA,UAAU,SACVtB,EAAM+D,kB,OCYFH,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,CAAiC7D,aAxChD,SAAqBC,GACnB,IAAMC,EAAYC,qBAAWL,GADE,EAGPoD,mBAAgB,IAHT,mBAGxBE,EAHwB,KAGlBa,EAHkB,KAKzBtD,EAASC,uBAAY,SAACS,GAE1B,OADAA,GAAKA,EACEC,IAAMD,GAAGV,OAAO,yBACtB,IAMH,OAJA8B,qBAAU,WACRwB,EAAQhE,EAAMiE,iBACb,CAACjE,EAAMiE,gBAEH,yBAAK3C,UAAU,qBACpB,yBAAKA,UAAU,gBAAf,4BAGA,6BAEI6B,EAAKE,KAAI,SAAAC,GAAC,OAAI,yBAAKhC,UAAU,YAAYuB,IAAKS,EAAEzC,IAC9C,yBAAKU,IAAK+B,EAAEnD,KAAF,UAAYF,EAAKM,KAAjB,8BAAmDiB,IAAK8B,EAAEzB,QACpE,yBAAKP,UAAU,cACb,yBAAKA,UAAU,eAAeZ,EAAO4C,EAAE7B,OACvC,yBAAKH,UAAU,aAAaI,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAOsD,EAAEzC,MAAQyC,EAAEzB,OAC1E,yBAAKP,UAAU,YAEXgC,EAAEY,KAAKb,KAAI,SAACC,EAAQa,GAAT,OACT,yBAAK7C,UAAU,kBAAkBuB,IAAKsB,EAAKzC,QAAS,WAAQzB,EAAK0B,KAAK3B,EAAOsD,EAAEzC,GAAI,UAChFyC,EAAEc,yB,OCyBRR,mBAAQ,SAAC7B,EAAO/B,GAAR,mBAAC,eAAuB+B,GAAU/B,KAA1C4D,CAAoD7D,aAtDnE,SAAiBC,GACf,IAAMa,EAAKwD,EAAYrE,IAAU,EAC3BsE,EAAOC,IAFc,EAGQpC,EAAS,GAAD,OAAImC,EAAK/D,KAAT,8BAAmCM,IACxEsC,GAJqB,EAGrBA,KAHqB,EAGFC,MACZhD,mBAAQ,WAAO,IACpBoE,EAAYxE,EAAZwE,QACN,OAAIxE,EAAMyE,QACDD,EAEFA,EAAQE,MAAM,EAAG,KACvB,CAAC1E,KAEE2E,EAAQvE,mBAAQ,WACpB,MAAmC,gBAA5BJ,EAAM4E,SAASC,WACrB,CAAC7E,EAAM4E,SAASC,WAEnB,SAASlD,IAAsB,IAAjBd,EAAgB,uDAAH,EACrBb,EAAM4E,SAASC,WAAa,aAAehE,GAC7Cb,EAAM8E,QAAQC,KAAK,aAAelE,GAItC,IAAMmE,EAAc5E,mBAAQ,WAE1B,OADY+C,EAAK8B,QAAO,SAAC3B,GAAD,OAAaA,EAAEzC,MAAQA,KACpC,IAAM,KAChB,CAACA,EAAIsC,IAER,OAAO,yBAAK7B,UAAU,oBAElBtB,EAAMkF,OAASF,EAAYpD,cACzB,oCACE,yBAAKN,UAAU,0BACb,8CAAe,uBAAGI,QAAS,SAACyD,GAAQA,EAAEC,iBAAkBzD,KAAU0D,KAAK,MAAMC,MAAO,CAAEC,WAAYZ,EAAQ,SAAW,YAAtG,6BAEjB,4BAEIxB,EAAKE,KAAI,SAACC,GAAD,OAAY,wBAAIhC,UAAU,YAAYuB,IAAKS,EAAEzC,GAAIa,QAAS,kBAAMC,EAAK2B,EAAEzC,MAC9E,8BAAOyC,EAAE1B,eACT,8BAAO0B,EAAEF,aAMjB,oCACE,0DAAW,0BAAM9B,UAAU,OAAOI,QAAS,WAAQ1B,EAAM8E,QAAQC,KAAK,iBAA3D,gBAAX,MAAqGC,EAAYpD,eACjH,kBAAC,EAAD,CAAUhB,IAAG,UAAK0D,EAAK/D,KAAV,8BAAoCM,W,OCtB5C+C,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,CAAiC7D,aA1BhD,SAAiBC,GACf,IAAMwF,EAASpF,mBAAQ,WACrB,MAAmC,YAA5BJ,EAAM4E,SAASC,WACrB,CAAC7E,EAAM4E,SAASC,WAEnB,SAASlD,IAAc,IAATd,EAAQ,uDAAH,EACbb,EAAM4E,SAASC,WAAa,SAAWhE,GAE3Cb,EAAM8E,QAAQC,KAAK,SAAWlE,GAGhC,OAAO,yBAAKS,UAAU,oBACpB,yBAAKA,UAAU,0BACb,8CACA,uBAAGI,QAAS,SAACyD,GAAQA,EAAEC,iBAAkBzD,KAAU0D,KAAK,MAAMC,MAAO,CAAEC,WAAYC,EAAS,SAAW,YAAvG,6BAEF,4BAEIxF,EAAMyF,SAASpC,KAAI,SAACC,GAAD,OAAY,wBAAIhC,UAAU,YAAYuB,IAAKS,EAAEzC,IAC9D,uBAAGa,QAAS,SAACyD,GAAQA,EAAEC,iBAAkBzD,EAAK2B,EAAEzC,KAAOwE,KAAK,OAAO/B,EAAEc,oBCQhER,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,CAAiC7D,aAxBhD,SAAgBC,GACd,IAAM0F,EAAYtF,mBAAQ,WACxB,OAAOJ,EAAM4E,SAASC,SAASc,WAAW,eACzC,CAAC3F,EAAM4E,SAASC,WACnB,OAAO,yBAAKvD,UAAU,kBACpB,yBAAKA,UAAU,aACb,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAS4D,MAAM,IACf,kBAAC,EAAD,OAEF,yBAAK5D,UAAU,cAAcgE,MAAO,CAACM,MAAOF,EAAY,MAAQ,QAE5DG,IAAMC,SAASzC,IAAIrD,EAAM+F,UAAU,SAACC,GAAD,OAAgB,oCAAGA,OAIxDN,EAAY,GACZ,yBAAKpE,UAAU,cACb,kBAAC,EAAD,YCZOsC,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,EARf,WACE,IAAMU,EAAOC,IAEb,OAAO,kBAAC,EAAD,KACL,kBAAC,EAAD,CAAU3D,IAAG,UAAK0D,EAAK/D,KAAV,wB,QCNF,G,OAAA,SAAUP,GAyBvB,OAAO,yBAAKsB,UAAU,cACpB,yBAAKA,UAAU,wBAEXuE,IAAMC,SAASzC,IAAIrD,EAAM+F,UAAU,SAAAC,GACjC,OAAO,6BAAMA,MAGjB,yBAAK1E,UAAU,SA/BP,CAAC,CACX2E,KAAM,eACNrF,IAAK,UAEP,CACEqF,KAAM,eACNrF,IAAK,eAEP,CACEqF,KAAM,eACNrF,IAAK,YAuBOyC,KAAI,WAAgBc,GAAS,IAAtBvD,EAAqB,EAArBA,IAAKqF,EAAgB,EAAhBA,KAChB,OAAO,kBAAC,IAAD,CAASC,GAAItF,EAAKiC,IAAKsB,EAAKgC,gBAAgB,UAAUF,WC3B1DrC,mBAAQ,SAAC7B,EAAO/B,GAAR,mBAAC,eAAuB+B,GAAU/B,KAA1C4D,EAPf,SAAkB5D,GAEhB,OAAO,kBAAC,EAAD,KACL,kBAAC,EAAD,UC6CW4D,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAvB6B,CAAiC7D,aA9ChD,SAAcC,GACZ,IAAMa,EAAKwD,EAAYrE,IAAU,EAE3BsE,EAAOC,IACLpB,EAAShB,EAAS,GAAD,OAAImC,EAAK/D,KAAT,0BAA+BM,GAAM,CAACsC,KAAM,KAA7DA,KAOFiD,EAAShG,mBAAQ,WAErB,OADUJ,EAAMyF,SAASR,QAAO,SAAC3B,GAAD,OAAaA,EAAEzC,MAAQA,KAC5C,KACV,CAACA,EAAIb,EAAMyF,WAEd,OAAO,kBAAC,EAAD,KACL,yBAAKnE,UAAU,oBAEX8E,EACE,0DAAW,0BAAM9E,UAAU,OAAOI,QAAS,WAAQ1B,EAAM8E,QAAQC,KAAK,aAA3D,gBAAX,MAAiGqB,EAAOhC,UAExG,oCACE,yBAAK9C,UAAU,gBAAf,gBAGA,4BAEItB,EAAMyF,SAASpC,KAAI,SAACC,GAAD,OAAY,wBAAIhC,UAAU,YAC3CuB,IAAKS,EAAEzC,GAAIa,QAAS,YAxBpC,WAAuB,IAATb,EAAQ,uDAAH,EACbb,EAAM4E,SAASC,WAAa,SAAWhE,GAE3Cb,EAAM8E,QAAQC,KAAK,SAAWlE,GAqBYc,CAAK2B,EAAEzC,MAEnC,8BAAOyC,EAAEc,UACT,8BAAOd,EAAE+C,SAASC,cAQ5BzF,GAAMsC,GAAQA,EAAKmD,OAAS,kBAAC,EAAD,CAAU1F,IAAG,UAAK0D,EAAK/D,KAAV,0BAAgCM,KAAW,S,yICrCpF0F,E,IAAAA,OAEAC,E,IAAAA,SAOFC,EAAa,CAAE5E,MAAO,GAAI6E,QAAS,GAAIxC,KAAM,GAAI/D,IAAK,GAAIwG,IAAK,IAErE,SAAS7E,EAAQC,EAAYC,GAAc,IACnCkC,EAASnC,EAATmC,KACEjC,EAAQD,EAARC,IACR,OAAQD,EAAOE,MACb,IAAK,cACH,OAAO,2BAAKH,GAAZ,IAAmBF,MAAOI,IAC5B,IAAK,gBACH,OAAO,2BAAKF,GAAZ,IAAmB2E,QAASzE,IAC9B,IAAK,UAEH,OADAiC,EAAK0C,OAAM,SAACtD,GAAD,OAAYA,EAAEzC,KAAOoB,EAAIpB,OAAOqD,EAAKa,KAAK9C,GAC9C,2BACFF,GADL,IAEEmC,KAAK,YAAKA,KAEd,IAAK,aAEH,OADAA,EAAOA,EAAKe,QAAO,SAAC3B,GAAD,OAAYA,EAAEzC,KAAOoB,KACjC,2BACFF,GADL,IAEEmC,KAAK,YAAKA,KAEd,IAAK,aACH,OAAO,2BACFnC,GADL,IAEE5B,IAAK8B,IAET,IAAK,UACH,OAAO,2BACFF,GADL,IAEE4E,IAAK1E,IAET,IAAK,aACH,OAAO,2BACFF,GADL,IAEE4E,IAAK,KAET,QACE,OAAO5E,GAuNE6B,mBAAQ,SAAA7B,GAAK,sBAAUA,KAAU,CAC9C8E,QAD8C,SACtC5E,GACN,MAAO,CAAEC,KAAM,UAAWD,QAE5B6E,QAJ8C,SAItC7E,GACN,MAAO,CAAEC,KAAM,UAAWD,SALf2B,CAOZ7D,aA1NH,SAAeC,GAAa,IAAD,EAEHiD,mBAAS,IAFN,mBAElB8D,EAFkB,KAEbC,EAFa,OAGH/D,mBAAS,IAHN,mBAGlB0D,EAHkB,KAGbM,EAHa,OAIHhE,mBAAS,IAJN,mBAIlB9C,EAJkB,KAIb+G,EAJa,KAKnBjH,EAAOC,qBAAWL,GAClBsH,EAASC,iBAAO,MAEhB9C,EAAOC,IACP1D,EAAKT,mBAAQ,kBAAMJ,EAAM8C,MAAMC,OAAOlC,KAAI,CAACb,EAAM8C,MAAMC,OAAOlC,KAChEP,EAAO6B,EAAS,GAAD,OAAImC,EAAK/D,KAAT,qBAA0BM,GAAM,CAAE6F,QAAS,GAAI7E,MAAO,GAAIJ,KAAM,EAAGyC,KAAM,GAAIzD,SAAU,KAVjF,EAYC6B,qBAAWR,EAAS2E,GAZrB,mBAYlB1E,EAZkB,KAYXQ,EAZW,KAczB,SAAS8E,EAAOlC,GAA+B,IAAvBjD,EAAsB,uDAAf,cAC7BK,EAAS,CACPL,OACAD,IAAKkD,EAAEmC,OAAOC,QA0BlB,SAASC,IAAuB,IAAhBtF,EAAe,uDAAR,OACrB,IAAc,SAATA,GAAoB6E,KAAkB,aAAT7E,GAAwByE,GAA1D,CACA,IAAM/F,EAAG,UAAMX,EAAKM,KAAX,YAAmB2B,EAAnB,QACHuF,EAAK,IAAIC,SACF,SAATxF,GAAiBuF,EAAGE,OAAO,OAAQZ,GAC1B,aAAT7E,GAAqBuF,EAAGE,OAAO,OAAQhB,GAC3C7F,IAAM,CACJF,MACAgH,OAAQ,OACR3H,KAAMwH,IACLzG,MAAK,YAAe,IAAZf,EAAW,EAAXA,KACI,SAATiC,GACFlC,EAAM6G,QAAQ5G,GAEH,aAATiC,GACFlC,EAAM8G,QAAQ7G,OA6BpB,IAAMuD,EAAW7C,uBAAY,SAAC4G,GAC5B,IAAInD,EAAWmD,EAAMM,MAAM,OAAO,GAC5BhH,EAAK0G,EAAMM,MAAM,OAAO,GAC9BtF,EAAS,CACPL,KAAM,UACND,IAAK,CACHmC,WACAvD,UAGH,IAEGiH,EAAYnH,uBAAY,SAAC4G,GAC7B,IAAInD,EAAWmD,EAAMM,MAAM,OAAO,GAClCtF,EAAS,CACPL,KAAM,UACND,IAAK,CACH8F,KAAM3D,EACNvD,GAAI0G,EAAMM,MAAM,OAAO,QAG1B,IAuBH,OAAO,yBAAKvG,UAAU,cACpB,yBAAKA,UAAU,QACb,uBAAOiG,MAAOxF,EAAMF,OAASvB,EAAKuB,MAAO2B,SAAU,SAAC2B,GAAD,OAAOkC,EAAOlC,IAAI6C,YAAY,6BACjF,uBAAQ9F,KAAK,UAAUR,QAvE3B,WACE,GAAMK,EAAMF,OAAUE,EAAM2E,SAAcpG,EAAKuB,OAAUvB,EAAKoG,QAA9D,CAKA,IAAM9F,EAAMN,EAAI,UAAML,EAAKM,KAAX,4BAAmCM,GAAnC,UAA6CZ,EAAKM,KAAlD,kBACVkH,EAAK,IAAIC,SACfD,EAAGE,OAAO,QAAS5F,EAAMF,OAASvB,EAAKuB,OACvC4F,EAAGE,OAAO,UAAW5F,EAAM2E,SAAWpG,EAAKoG,SAC3C,IACMuB,GADKlG,EAAMmC,KAAKoC,OAASvE,EAAMmC,KAAO5D,EAAK4D,MAC9Bb,KAAI,SAACC,GAAD,OAAYA,EAAEzC,MACrC4G,EAAGE,OAAO,SAAUM,EAAMC,QAC1BT,EAAGE,OAAO,MAAO5F,EAAM5B,KAAOG,EAAKH,KACnCsH,EAAGE,OAAO,WAAY5F,EAAM4E,IAAI9F,IAAMP,EAAKG,SAASI,IACpDC,IAAM,CACJF,MACAgH,OAAQ,OACR3H,KAAMwH,IACLzG,MAAK,SAAAC,GACNC,QAAQC,IAAIF,SAmD6BX,EAAO,eAAO,eAAvD,iBAEF,yBAAKgB,UAAU,QACb,uBAAOY,KAAK,OAAOqF,MAAOR,EAAKvD,SAAU,SAAC2B,GAAQ6B,EAAO7B,EAAEmC,OAAOC,UAClE,uBAAQrF,KAAK,UAAUR,QAAS,WAAQ8F,MAAxC,6BAEF,yBAAKlG,UAAU,QACb,uBAAOY,KAAK,OAAOqF,MAAOZ,EAAKnD,SAAU,SAAC2B,GAAQ8B,EAAO9B,EAAEmC,OAAOC,UAClE,uBAAQrF,KAAK,UAAUR,QAAS,WAAQ8F,EAAO,cAA/C,6BAEF,yBAAKlG,UAAU,QACb,2BAAOY,KAAK,OAAOiG,IAAKhB,IACxB,uBAAQjF,KAAK,UAAUR,QA7H3B,WACE,IACM0G,EADSjB,EAAOkB,QAC2BC,MACjD,GAAIF,EAAO9B,OAAX,CACA,IAAMmB,EAAK,IAAIC,SACfD,EAAGE,OAAO,QAASS,EAAO,IAC1BX,EAAGE,OAAO,MAAO,QACjB7G,IACE,CACEF,IAAI,GAAD,OAAKX,EAAKM,KAAV,WACHqH,OAAQ,OACR3H,KAAMwH,IAERzG,MAAK,SAAAC,GACL,IAAML,EAAMX,EAAKM,KAAOU,EAAIhB,KAAKA,KACjCsC,EAAS,CACPL,KAAM,aACND,IAAKrB,UA4GP,6BAEF,yBAAKU,UAAU,QACb,uBAAOY,KAAK,OAAOqF,MAAOpH,EAAKqD,SAAU,SAAC2B,GAAQ+B,EAAO/B,EAAEmC,OAAOC,UAClE,uBAAQrF,KAAK,UAAUR,QAAS,WAC9Ba,EAAS,CACPL,KAAM,aACND,IAAK9B,MAHT,yCAOF,yBAAKoB,IAAKQ,EAAM5B,KAAOG,EAAKH,IAAKqB,IAAI,2BAAO8D,MAAO,CAAEiD,OAAQxG,EAAM5B,KAAOG,EAAKH,IAAM,QAAU,MAAOyF,MAAO,OAAQL,WAAYxD,EAAM5B,KAAOG,EAAKH,IAAM,UAAY,SAAUqI,QAAS,WACxL,uBACEC,YAAU,EACVnD,MAAO,CAAEM,MAAO,KAChBoC,YAAY,eACZU,iBAAiB,WACjBlF,SAAUA,EACVmF,aAAc,SAACC,EAAOC,GAAR,OACXA,EAAe9C,SAAS+C,cAAcC,QAAQH,EAAME,gBAAkB,IAIvE9I,EAAMyF,SAASpC,KAAI,SAACC,GAAD,OAAY,kBAACiD,EAAD,CAAQgB,MAAK,UAAKjE,EAAEc,SAAP,cAAqBd,EAAEzC,IAAMgC,IAAKS,EAAEzC,IAAKyC,EAAEc,cAIzFrC,EAAMmC,KAAKb,KAAI,SAACC,GAAD,OAAY,uBAAK0F,MAAM,UAAUnG,IAAKS,EAAEzC,GAAIoI,UAAQ,EAACC,QAAS,YA/DjF,SAAkBrI,GAChB0B,EAAS,CACPL,KAAM,aACND,IAAKpB,IA4DgFsI,CAAS7F,EAAEzC,MAC7FyC,EAAEc,aAGP,6BACA,uBACEqE,YAAU,EACVnD,MAAO,CAAEM,MAAO,KAChBoC,YAAY,wBACZU,iBAAiB,WACjBlF,SAAUsE,EACVa,aAAc,SAACC,EAAOC,GAAR,OACXA,EAAe9C,SAAS+C,cAAcC,QAAQH,EAAME,gBAAkB,IAIvE9I,EAAMwE,QAAQnB,KAAI,SAACC,GAAD,OAAY,kBAACiD,EAAD,CAAQgB,MAAK,UAAKjE,EAAE1B,cAAP,cAA0B0B,EAAEzC,IAAMgC,IAAKS,EAAEzC,IAAKyC,EAAE1B,mBAI7FG,EAAM4E,IAAIoB,KACR,uBAAKiB,MAAM,UAAUC,UAAQ,EAACC,QAAS,WA5E3C3G,EAAS,CACPL,KAAM,iBA4EDH,EAAM4E,IAAIoB,MAASzH,EAAKG,UAAYH,EAAKG,SAASmB,eAC5C,GAEb,6BACA,yBAAKN,UAAU,gBACb,yBAAKA,UAAU,iBACb,kBAACkF,EAAD,CAAUe,MAAOxF,EAAM2E,SAAWpG,EAAKoG,QAASlD,SAAU,SAAC2B,GAAD,OAAOkC,EAAOlC,EAAG,kBAAkB6C,YAAY,8BAE3G,yBAAK1G,UAAU,iBACb,kBAAC,IAAD,CAAU8H,OAAQrH,EAAM2E,SAAWpG,EAAKoG,iB,OCpQjC,SAAS2C,IACtB,IAAM/E,EAAOpE,qBAAWL,GADQ,EAERoD,mBAAS,IAFD,mBAEzBqG,EAFyB,KAEnBC,EAFmB,KAmBhC,OAhBA/G,qBAAU,WACR1B,IAAMC,IAAN,UAAauD,EAAK/D,KAAlB,cAAmCS,MAAK,YAAe,IAAZf,EAAW,EAAXA,KACzCsJ,EAAQtJ,EAAKkD,KAAKE,KAAI,SAACC,GAAD,OAAYgB,EAAK/D,KAAO+C,EAAEyE,cAEjD,CAACzD,EAAK/D,OAYF,yBAAKe,UAAU,gBACpB,4CACA,yBAAKA,UAAU,cAEXgI,EAAKjG,KAAI,SAACC,EAAWa,GAAZ,OAA4B,yBAAKtB,IAAKsB,EAAK7C,UAAU,YAC5D,yBAAKC,IAAK+B,EAAG9B,IAAK8B,IAClB,6BACA,0BAAM5B,QAAS,YAjBvB,SAAc8H,GACZ,IAAMC,EAAMC,SAASC,cAAc,SACnCF,EAAIlC,MAAQiC,EACZE,SAASE,KAAKC,YAAYJ,GAC1BA,EAAIK,SACJJ,SAASK,YAAY,QACrBL,SAASE,KAAKI,YAAYP,GAC1BnF,EAAK2F,UAAU,oDAUcC,CAAK5G,KAAOA,S,OCK9B6G,OA5Bf,SAAqBnK,GACnB,IAAMsE,EAAOpE,qBAAWL,GAElBgB,EAAKT,mBAAQ,kBAAMJ,EAAM8C,MAAMC,OAAOlC,KAAI,CAACb,EAAM8C,MAAMC,OAAOlC,KAC9DP,EAAO6B,EAAS,GAAD,OAAImC,EAAK/D,KAAT,qBAA0BM,GAAM,CAAE6F,QAAS,GAAI7E,MAAO,GAAIJ,KAAM,EAAGyC,KAAM,GAAIzD,SAAU,KAEtG2J,EAAYhK,mBAAQ,WAExB,OADkBE,EAAZoG,QACU2D,OAAOvH,MAAM,UAC5B,CAACxC,IAEEI,EAASC,uBAAY,SAACS,GAE1B,OADAA,GAAKA,EACEC,IAAMD,GAAGV,OAAO,sBACtB,IAEH,OAAO,kBAAC,EAAD,KACL,yBAAKY,UAAU,6BACb,wBAAIgE,MAAO,CAAEkD,QAAS4B,EAAY,QAAU,SAAW9J,EAAKuB,OAC5D,yBAAKP,UAAU,eACb,8BAAOZ,EAAOJ,EAAKmB,OACnB,0BAAMC,QAAS,WAAQ4C,EAAK3C,KAAK3B,EAAOM,EAAKG,UAAYH,EAAKG,SAASI,GAAI,aAAeS,UAAU,QAAQhB,EAAKG,UAAYH,EAAKG,SAASmB,gBAE7I,kBAAC,IAAD,CAAUwH,OAAQ9I,EAAKoG,a,cCsBd9C,oBACb,SAAC7B,GAAD,sBAAiBA,KACjB,CACEuI,eADF,SACiB/J,GACb,8CAAO,WAAgBgC,GAAhB,iBAAAgI,EAAA,sEACkBzJ,IAAMC,IAAN,UAAaR,EAAb,cADlB,gBACGN,EADH,EACGA,KACRsC,EAAS,CACPL,KAAM,mBACND,IAAKhC,IAJF,2CAAP,uDAQFuK,YAVF,SAUcjK,GACV,8CAAO,WAAgBgC,GAAhB,iBAAAgI,EAAA,sEACkBzJ,IAAMC,IAAN,UAAaR,EAAb,UADlB,gBACGN,EADH,EACGA,KACRsC,EAAS,CACPL,KAAM,gBACND,IAAKhC,IAJF,2CAAP,uDAQFwK,WAnBF,SAmBalK,GACT,8CAAO,WAAgBgC,GAAhB,iBAAAgI,EAAA,sEACkBzJ,IAAMC,IAAN,UAAaR,EAAb,oBADlB,gBACGN,EADH,EACGA,KACRsC,EAAS,CACPL,KAAM,eACND,IAAKhC,IAJF,2CAAP,wDAtBS2D,EAtCf,SAAa5D,GACX,IAAMsE,EAAOpE,qBAAWL,GAClB6K,EAAStK,mBAAQ,WACrB,MAAO,CACL,CAAEuK,KAAM,SAAUC,IAAKC,GACvB,CAAEF,KAAM,gBAAiBC,IAAKE,GAC9B,CAAEH,KAAM,YAAaC,IAAKG,GAC1B,CAAEJ,KAAM,aAAcC,IAAKI,GAC3B,CAAEL,KAAM,OAAQC,IAAKvB,GACrB,CAAEsB,KAAM,eAAgBC,IAAKT,OAE9B,IASH,OAPA3H,qBAAU,WACRxC,EAAMsK,eAAehG,EAAK/D,MAC1BP,EAAMwK,YAAYlG,EAAK/D,MACvBP,EAAMyK,WAAWnG,EAAK/D,QAErB,IAGD,kBAAC,IAAD,KACE,kBAAC,EAAD,KACE,gCAEF,yBAAKe,UAAU,OACf,kBAAC,IAAD,KAEIoJ,EAAOrH,KAAI,SAACC,EAAQa,GAAT,OAAyB,kBAAC,IAAD,CAAOwG,KAAMrH,EAAEqH,KAAMM,UAAW3H,EAAEsH,IAAK/H,IAAKsB,OAElF,kBAAC,IAAD,CAAU+G,OAAK,EAACC,KAAK,SAASjF,GAAG,aACjC,kBAAC,IAAD,CAAUgF,OAAK,EAACC,KAAK,IAAIjF,GAAG,iB,iDCdfkF,I,2DAGnB,WAAYpL,GAAa,IAAD,+BACtB,cAAMA,IAFAqL,MAAa,KAGnB,EAAKtJ,MAAQ,CACXuJ,MAAM,EACNC,IAAK,IAGPH,EAAMnB,UAAY,EAAKqB,KAAKE,KAAV,iBAPI,E,kDAUZD,GAAc,IAAD,OACvBE,aAAaC,KAAKL,OAElBK,KAAKC,SAAS,CACZL,MAAM,EACNC,QACC,WACD,EAAKK,iB,kCAIY,IAAD,OAClBF,KAAKL,MAAQQ,YAAW,WACtB,EAAKF,SAAS,CACZL,MAAM,MAEP,O,+BAIH,OAAOQ,IAASC,aAAa,yBAC3BzK,UAAU,QAAQgE,MAAO,CAAEkD,QAASkD,KAAK3J,MAAMuJ,KAAO,QAAU,SAE/DI,KAAK3J,MAAMwJ,KACN7B,SAASE,U,GArCc/D,IAAMmG,YCpBrBC,QACW,cAA7BC,OAAOtH,SAASuH,UAEe,UAA7BD,OAAOtH,SAASuH,UAEhBD,OAAOtH,SAASuH,SAASrJ,MACvB,2D,0ECVAsJ,GAAmB,CACvBhJ,MAAO,EACPS,aAAc,EACdE,UAAW,EACXD,SAAU,EACVuI,YAAa,GACb5G,SAAU,GACVxB,cAAe,GACfO,QAAS,IAmDI8H,qBAhDf,WAAoD,IAAnCvK,EAAkC,uDAA1BqK,GAAapK,EAAa,uCAC3CE,EAAcF,EAAdE,KAAMD,EAAQD,EAARC,IACNwD,EAAsB1D,EAAtB0D,SAAUjB,EAAYzC,EAAZyC,QAChB,OAAQtC,GACN,IAAK,MACH,OAAO,2BACFH,GADL,IAEEqB,MAAOrB,EAAMqB,MAAQ,IAEzB,IAAK,mBACH,IAAImJ,EAAStK,EAAIkB,KAAKqJ,MAAK,SAACC,EAAQlC,GAAT,OAAoBA,EAAE9I,KAAOgL,EAAEhL,QAAMiD,MAAM,EAAG,GACzE,OAAO,2BACF3C,GADL,IAEE8B,aAAc5B,EAAImB,MAClBiJ,YAAapK,EAAIkB,KACjBc,cAAesI,IAEnB,IAAK,gBACH,OAAO,2BACFxK,GADL,IAEEgC,UAAW9B,EAAImB,MACfqC,SAAUxD,EAAIkB,OAElB,IAAK,UAGH,OAFAsC,EAASV,KAAK9C,GAEP,2BACFF,GADL,IAEE0D,SAAS,YAAKA,KAElB,IAAK,eACH,OAAO,2BACF1D,GADL,IAEE+B,SAAU7B,EAAImB,MACdoB,QAASvC,EAAIkB,OAEjB,IAAK,UAGH,OAFAqB,EAAQO,KAAK9C,GAEN,2BACFF,GADL,IAEEyC,QAAQ,YAAKA,KAEjB,QACE,OAAOzC,KAIuB2K,aAAgBC,OCrDpDtL,SAAauL,MAEbvL,SAAawL,MACbxL,SAAa,SAEb,IAAMyL,GAAMpD,SAASC,cAAc,OACnCmD,GAAIjM,GAAK,gBACT6I,SAASE,KAAKC,YAAYiD,IAE1B,IACMC,GAAa,CACjBxM,KAF8E,sBAG9Ec,QACA4I,UAHiB,SAGPsB,GACgDH,GACpDnB,UAAUsB,IAEhB5J,KAPiB,SAOZ3B,EAAYa,GAAgD,IAA3BqB,EAA0B,uDAAX,UACnDlC,EAAM8E,QAAQC,KAAd,WAAuB7C,GAAvB,OAAqC,KAAPrB,EAAY,IAAMA,EAAK,OAIzDiL,IAASkB,OACP,kBAAC,IAAD,CAAUC,MAAOA,IACf,kBAACpN,EAAQqN,SAAT,CAAkB3F,MAAOwF,IACvB,kBAAC,GAAD,OAEF,kBAAC,GAAD,OAEFrD,SAASyD,eAAe,SFgGpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBtM,MAAK,SAAAuM,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLxM,QAAQwM,MAAMA,EAAMC,c","file":"static/js/main.d1df4a3f.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nexport const context = createContext<any>({})\n","import React, { useContext, useMemo, useCallback } from 'react'\nimport { context } from '@/context'\nimport { withRouter } from 'react-router-dom'\nimport axios from 'axios'\nimport dayjs from 'dayjs'\nimport './index.less'\n\nfunction Article(props: any) {\n  const data: any = useContext(context)\n  const isDev: boolean = process.env.NODE_ENV === 'development'\n  const img = useMemo(() => {\n    let image = props.info.img\n    return image ? image : `${data.host}/files/download?name=1.jpg`\n  }, [data.host, props.info.img])\n\n  const cata = useMemo(() => {\n    return props.info.category\n  }, [props.info])\n\n  const delAction = useCallback(\n    () => {\n      const url = `${data.host}/articles/delete/${props.info.id}`\n      axios.get(url).then((res) => {\n        console.log(res.data)\n      })\n    },\n    [data.host, props.info.id],\n  )\n\n  const format = useCallback((n: string | number) => {\n    n = +n\n    return dayjs(n).format('YYYY-MM-DD HH:mm')\n  }, [])\n\n  return <div className=\"article-wrap card-bg\">\n    <img src={img} alt=\"\" />\n    <div className=\"content-wrap\">\n      <div className=\"notice mb-7\">\n        <span>{format(props.info.time)}</span>\n        <span onClick={() => { data.jump(props, cata && cata.id, 'catagory') }} className=\"link\">{cata && cata.category_name}</span>\n        {\n          isDev ? \n          <>\n            <span className=\"link\" onClick={() => {data.jump(props, props.info.id, 'write')}}>编辑{props.info.id}</span>\n            <span className=\"link\" onClick={() => {delAction()}}>删除</span>\n          </>\n          :''\n        }\n        \n      </div>\n      <h1 className=\"title link\" onClick={() => { data.jump(props, props.info.id) }}>\n        {props.info.title}\n      </h1>\n    </div>\n  </div>\n}\n\nexport default withRouter(Article)","/* eslint-disable */\n\nimport { useState, useEffect, useReducer } from 'react'\nimport axios from 'axios'\n\nfunction reducer(state: any, action: any) {\n  const { val } = action\n  switch (action.type) {\n    case 'changeInfo':\n      return { ...val }\n    default:\n      return state\n  }\n}\n\nexport default function useAxios(url: string, initState: any = {}, fn:any = () => {}) {\n  const [info, dispatch] = useReducer(reducer, initState)\n  useEffect(() => {\n    \n    let cancel: any = null\n    axios.get(url, {\n      cancelToken: new axios.CancelToken(c => {\n        cancel = c\n      })\n    }).then((res: any) => {\n      res = res.data\n      dispatch({\n        type: 'changeInfo',\n        val: res\n      })\n      fn({...res})\n    })\n    return () => {\n      cancel()\n    }\n  }, [url])\n  return info\n}","import { useMemo } from 'react'\n\nexport default function (props: any, key: string = 'id') {\n  const data = useMemo(() => props.match.params[key], [key, props.match.params])\n  return data\n}","import { useContext } from 'react'\nimport { context } from '@/context'\n\nexport default function () {\n  const ctxt = useContext(context)\n  return ctxt\n}","import React, { useState, useEffect } from 'react'\nimport Article from '@c/Article'\nimport { Pagination } from 'antd'\nimport { useAxios } from '@/common/hooks'\n\nexport default function Aricles(props: any) {\n  const [url, setUrl] = useState<string>(props.url)\n\n  useEffect(() => {\n    setUrl(props.url)\n  }, [props.url])\n\n\n  let { list, count } = useAxios(url, { list: [], count: 0 })\n\n  function onChange(page: number) {\n    setUrl((url: string) => `${url}?page=${page}`)\n  }\n  \n  return <>\n    {\n      list.map((t: any) => {\n        return <Article info={t} key={t.id} />\n      })\n    }\n    <div className=\"pag-wraper\">\n      <Pagination\n        defaultPageSize={10}\n        onChange={onChange}\n        defaultCurrent={1}\n        total={count || 11}\n      />\n    </div>\n  </>\n}\n","import React, { useContext } from 'react'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport './index.less'\n\nfunction Card(props: any) {\n  const data: any = useContext(context)\n\n  return <div className=\"card-content card-bg\">\n    <img src={`${data.host}/files/download?name=1.jpg`} alt=\"\" />\n    <span className=\"name\">凉城</span>\n    <span>不负初心，方得始终</span>\n    <nav className=\"level\">\n      <div className=\"level-item link\" onClick={() => { data.jump(props, '', 'index') }}>\n        <p className=\"heading\">\n          文章\n        </p>\n        <p className=\"title\">\n          {props.articleCount}\n        </p>\n      </div>\n      <div className=\"level-item link\" onClick={() => { data.jump(props, 0, 'catagory') }}>\n        <p className=\"heading\">\n          分类\n        </p>\n        <p className=\"title\">\n          {props.ctgCount}\n        </p>\n      </div>\n      <div className=\"level-item link\" onClick={() => { data.jump(props, 0, 'tags') }}>\n        <p className=\"heading\">\n          标签\n        </p>\n        <p className=\"title\">\n          {props.tagsCount}\n        </p>\n      </div>\n\n    </nav>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(Card))","import React, { useContext, useState, useEffect, useCallback } from 'react'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport dayjs from 'dayjs'\nimport './index.less'\n\nfunction ArticleList(props: any) {\n  const data: any = useContext(context)\n\n  const [list, setList] = useState<any[]>([])\n\n  const format = useCallback((n: string | number) => {\n    n = +n\n    return dayjs(n).format('YYYY-MM-DD HH:mm:ss')\n  }, [])\n\n  useEffect(() => {\n    setList(props.sortedArticle)\n  }, [props.sortedArticle])\n\n  return <div className=\"list-wrap card-bg\">\n    <div className=\"notice mb-10\">\n      最新文章\n    </div>\n    <div>\n      {\n        list.map(t => <div className=\"item-wrap\" key={t.id}>\n          <img src={t.img || `${data.host}/files/download?name=1.jpg`} alt={t.title} />\n          <div className=\"item-right\">\n            <div className=\"date notice\">{format(t.time)}</div>\n            <div className=\"title link\" onClick={() => { data.jump(props, t.id) }}>{t.title}</div>\n            <div className=\"tag-wrap\">\n              {\n                t.tags.map((t: any, ind: number) =>\n                  <div className=\"tag notice link\" key={ind} onClick={() => { data.jump(props, t.id, 'tags') }}>\n                    {t.tag_name}\n                  </div>)\n              }\n            </div>\n          </div>\n        </div>)\n      }\n    </div>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(ArticleList))","import React, { useMemo } from 'react'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { useGetParam, useAxios, useGetCtxt } from '@/common/hooks'\nimport Articles from '@c/Articles'\nimport './index.less'\n\nfunction CtgList(props: any) {\n  const id = useGetParam(props) || 0\n  const ctxt = useGetCtxt()\n  let { list: articleList, count } = useAxios(`${ctxt.host}/category/articles/${id}`)\n  const list = useMemo(() => {\n    let { ctgList } = props\n    if (props.noLimit) {\n      return ctgList\n    }\n    return ctgList.slice(0, 7)\n  }, [props])\n\n  const inCtg = useMemo(() => {\n    return props.location.pathname === '/catagory/0'\n  }, [props.location.pathname])\n\n  function jump(id: number = 0) {\n    if (props.location.pathname !== '/catagory/' + id) {\n      props.history.push('/catagory/' + id)\n    }\n  }\n\n  const curCategory = useMemo(() => {\n    const cur = list.filter((t: any) => +t.id === +id)\n    return cur[0] || {}\n  }, [id, list])\n  \n  return <div className=\"ctg-wrap card-bg\">\n    {\n      props.card || !curCategory.category_name ?\n        <>\n          <div className=\"notice mb-10 card-head\">\n            <span>分类</span><a onClick={(e) => { e.preventDefault(); jump() }} href=\"890\" style={{ visibility: inCtg ? 'hidden' : 'visible' }}>查看更多</a>\n          </div>\n          <ul>\n            {\n              list.map((t: any) => <li className=\"item-wrap\" key={t.id} onClick={() => jump(t.id)}>\n                <span>{t.category_name}</span>\n                <span>{t.count}</span>\n              </li>)\n            }\n          </ul>\n        </>\n        :\n        <>\n          <div>当前位置: <span className=\"link\" onClick={() => { props.history.push('/catagory/0') }}>分类</span> / {curCategory.category_name}</div>\n          <Articles url={`${ctxt.host}/category/articles/${id}`} />\n        </>\n\n    }\n\n  </div>\n}\n\nexport default connect((state, props) => ({ ...state, ...props }))(withRouter(CtgList))","import React, { useMemo } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport './index.less'\n\nfunction TagList(props: any) {\n  const inTags = useMemo(() => {\n    return props.location.pathname === '/tags/0'\n  }, [props.location.pathname])\n\n  function jump(id = 0) {\n    if (props.location.pathname === '/tags/' + id) return\n\n    props.history.push('/tags/' + id)\n  }\n\n  return <div className=\"tag-wrap card-bg\">\n    <div className=\"notice mb-10 card-head\">\n      <span>标签</span>\n      <a onClick={(e) => { e.preventDefault(); jump() }} href=\"123\" style={{ visibility: inTags ? 'hidden' : 'visible' }}>查看更多</a>\n    </div>\n    <ul>\n      {\n        props.tagsList.map((t: any) => <li className=\"item-wrap\" key={t.id}>\n          <a onClick={(e) => { e.preventDefault(); jump(t.id) }} href=\"123\">{t.tag_name}</a>\n        </li>)\n      }\n    </ul>\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(TagList))","import React, {useMemo} from 'react'\nimport { connect } from 'react-redux'\nimport Card from '@c/Card'\nimport ArticleList from '@c/ArticleList'\nimport CtgList from '@/components/CtgList'\nimport TagList from '@/components/TagList'\nimport { withRouter } from 'react-router-dom'\n\nfunction Layout(props: any) {\n  const inArticle = useMemo(() => {\n    return props.location.pathname.startsWith('/article/')\n  }, [props.location.pathname])\n  return <div className='app main-wrapp'>\n    <div className=\"flex-left\">\n      <Card />\n      <CtgList card={true} />\n      <TagList />\n    </div>\n    <div className=\"flex-center\" style={{width: inArticle ? '75%' : '50%'}}>\n      {\n        React.Children.map(props.children, (child: any) => <>{child}</>)\n      }\n    </div>\n    {\n      inArticle ? '' :\n      <div className=\"flex-right\">\n        <ArticleList />\n      </div>\n    }\n  </div>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(Layout))","import React from 'react'\nimport { connect } from 'react-redux'\nimport Articles from '@c/Articles'\nimport Layout from '@c/Layout'\nimport { useGetCtxt } from '@/common/hooks'\n\nfunction Main() {\n  const ctxt = useGetCtxt()\n\n  return <Layout>\n    <Articles url={`${ctxt.host}/articles/list`} />\n  </Layout>\n}\n\nexport default connect(state => ({ ...state }))(Main)","import React, { ReactChild, useState } from 'react'\nimport { NavLink } from 'react-router-dom'\nimport './Head.less'\n\nexport default function (props: { children: ReactChild }) {\n  let links = [{\n    text: '主页',\n    url: '/index'\n  },\n  {\n    text: '分类',\n    url: '/catagory/0'\n  },\n  {\n    text: '标签',\n    url: '/tags/0'\n  }\n  ]\n\n  if (process.env.NODE_ENV === 'development') {\n    links.push({\n      text: '写文章',\n      url: '/write/0'\n    }, {\n      text: '图库',\n      url: '/pic'\n    })\n  }\n\n  return <nav className=\"app-header\">\n    <div className=\"app app-inner-header\">\n      {\n        React.Children.map(props.children, child => {\n          return <div>{child}</div>\n        })\n      }\n      <div className=\"links\">\n        {\n          links.map(({ url, text }, ind) => {\n            return <NavLink to={url} key={ind} activeClassName=\"active\">{text}</NavLink>\n          })\n        }\n      </div>\n    </div>\n  </nav>\n}","import React from 'react'\nimport Layout from '@c/Layout'\nimport CtgList from '@c/CtgList'\nimport { connect } from 'react-redux'\n\nfunction Category(props: any) {\n\n  return <Layout>\n    <CtgList />\n  </Layout>\n}\n\nexport default connect((state, props) => ({ ...state, ...props }))(Category)","import React, { useMemo } from 'react'\nimport Layout from '@c/Layout'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { useGetParam, useAxios, useGetCtxt } from '@/common/hooks'\nimport Articles from '@c/Articles'\n\nfunction Tags(props: any) {\n  const id = useGetParam(props) || 0\n  \n  const ctxt = useGetCtxt()\n  const { list } = useAxios(`${ctxt.host}/tags/articles/${id}`, {list: []})\n  function jump(id = 0) {\n    if (props.location.pathname === '/tags/' + id) return\n\n    props.history.push('/tags/' + id)\n  }\n\n  const curTag = useMemo(() => {\n    let tag = props.tagsList.filter((t: any) => +t.id === +id)\n    return tag[0]\n  }, [id, props.tagsList])\n\n  return <Layout>\n    <div className=\"ctg-wrap card-bg\">\n      {\n        curTag ?\n          <div>当前位置: <span className=\"link\" onClick={() => { props.history.push('/tags/0') }}>标签</span> / {curTag.tag_name}</div>\n          :\n          <>\n            <div className=\"notice mb-10\">\n              标签\n            </div>\n            <ul>\n              {\n                props.tagsList.map((t: any) => <li className=\"item-wrap\"\n                  key={t.id} onClick={() => { jump(t.id) }}\n                >\n                  <span>{t.tag_name}</span>\n                  <span>{t.articles.length}</span>\n                </li>)\n              }\n            </ul>\n          </>\n      }\n\n      {\n        id && list && list.length ? <Articles url={`${ctxt.host}/tags/articles/${id}`} /> : ''\n      }\n    </div>\n  </Layout>\n}\n\nexport default connect(state => ({ ...state }))(withRouter(Tags))","import React, { useState, useReducer, useCallback, useRef, useContext, useMemo } from 'react'\nimport { Button, Input, Select, Tag } from 'antd'\nimport axios from 'axios'\nimport './Write.less'\nimport { useAxios, useGetCtxt } from '@/common/hooks'\nimport MarkDown from 'react-markdown'\nimport { context } from '@/context'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\n\nconst { Option } = Select\n\nconst { TextArea } = Input\n\ninterface Act {\n  type: string;\n  val?: any\n}\n\nconst initalSate = { title: '', content: '', tags: [], img: '', ctg: {} }\n\nfunction reducer(state: any, action: Act) {\n  let { tags } = state\n  const { val } = action\n  switch (action.type) {\n    case 'changeTitle':\n      return { ...state, title: val }\n    case 'changeContent':\n      return { ...state, content: val }\n    case 'ADD_TAG':\n      tags.every((t: any) => t.id !== val.id) && tags.push(val)\n      return {\n        ...state,\n        tags: [...tags]\n      }\n    case 'REMOVE_TAG':\n      tags = tags.filter((t: any) => t.id !== val)\n      return {\n        ...state,\n        tags: [...tags]\n      }\n    case 'CHANGE_IMG':\n      return {\n        ...state,\n        img: val\n      }\n    case 'GET_CTG':\n      return {\n        ...state,\n        ctg: val\n      }\n    case 'REMOVE_CTG':\n      return {\n        ...state,\n        ctg: ''\n      }\n    default:\n      return state\n  }\n}\n\nfunction Write(props: any) {\n\n  const [tag, setTag] = useState('')\n  const [ctg, setCtg] = useState('')\n  const [img, setImg] = useState('')\n  const data = useContext(context)\n  const imgRef = useRef(null)\n\n  const ctxt = useGetCtxt()\n  const id = useMemo(() => props.match.params.id, [props.match.params.id])\n  let info = useAxios(`${ctxt.host}/articles/${id}`, { content: '', title: '', time: 0, tags: [], category: {} })\n\n  const [state, dispatch] = useReducer(reducer, initalSate)\n  \n  function change(e: any, type = 'changeTitle') {\n    dispatch({\n      type,\n      val: e.target.value\n    })\n  }\n\n  function uploadImg() {\n    const imgDom = imgRef.current as unknown\n    const images: any = (imgDom as HTMLInputElement).files\n    if(!images.length) return\n    const fd = new FormData()\n    fd.append('image', images[0])\n    fd.append('msg', 'abcd')\n    axios(\n      {\n        url: `${data.host}/upload`,\n        method: 'post',\n        data: fd\n      }\n    ).then(res => {\n      const url = data.host + res.data.data\n      dispatch({\n        type: 'CHANGE_IMG',\n        val: url\n      })\n    })\n  }\n\n  function addTag(type = 'tags') {\n    if ((type === 'tags' && !tag) || (type === 'category' && !ctg)) return\n    const url = `${data.host}/${type}/add`\n    const fd = new FormData()\n    if (type === 'tags') fd.append('name', tag)\n    if (type === 'category') fd.append('name', ctg)\n    axios({\n      url,\n      method: 'post',\n      data: fd\n    }).then(({ data }) => {\n      if (type === 'tags') {\n        props.add_tag(data)\n      }\n      if (type === 'category') {\n        props.add_ctg(data)\n      }\n    })\n  }\n\n  function upload() {\n    if ((!state.title || !state.content) && (!info.title || !info.content) ) {\n\n      return\n    }\n    \n    const url = info ? `${data.host}/articles/update/${id}` : `${data.host}/articles/send`\n    const fd = new FormData()\n    fd.append('title', state.title || info.title)\n    fd.append('content', state.content || info.content)\n    let tags = state.tags.length ? state.tags : info.tags\n    const tagId = tags.map((t: any) => t.id)\n    fd.append('tag_id', tagId.join())\n    fd.append('img', state.img || info.img)\n    fd.append('category', state.ctg.id || info.category.id)\n    axios({\n      url,\n      method: 'post',\n      data: fd\n    }).then(res => {\n      console.log(res)\n    })\n  }\n\n  const onChange = useCallback((value) => {\n    let tag_name = value.split('$_$')[0]\n    const id = value.split('$_$')[1]\n    dispatch({\n      type: 'ADD_TAG',\n      val: {\n        tag_name,\n        id\n      }\n    })\n  }, [])\n\n  const onChange1 = useCallback((value) => {\n    let tag_name = value.split('$_$')[0]\n    dispatch({\n      type: 'GET_CTG',\n      val: {\n        name: tag_name,\n        id: value.split('$_$')[1]\n      }\n    })\n  }, [])\n\n  function closeTag(id: number) {\n    dispatch({\n      type: 'REMOVE_TAG',\n      val: id\n    })\n  }\n\n  function closeCtg() {\n    dispatch({\n      type: 'REMOVE_CTG',\n    })\n  }\n\n  // const onBlur = useCallback(() => {\n  //   console.log('blur')\n  // }, [])\n\n  // const onSearch = useCallback((val) => {\n  //   console.log('search', val)\n  // }, [])\n\n  return <div className=\"write-wrap\">\n    <div className=\"flex\">\n      <Input value={state.title || info.title} onChange={(e) => change(e)} placeholder='文章标题' />\n      <Button type=\"primary\" onClick={upload}>{info ? '更新' : '上传'}文章</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={tag} onChange={(e) => { setTag(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => { addTag() }}>新增标签</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={ctg} onChange={(e) => { setCtg(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => { addTag('category') }}>新增分类</Button>\n    </div>\n    <div className=\"flex\">\n      <input type=\"file\" ref={imgRef} />\n      <Button type=\"primary\" onClick={uploadImg}>上传图片</Button>\n    </div>\n    <div className=\"flex\">\n      <Input type=\"text\" value={img} onChange={(e) => { setImg(e.target.value) }} />\n      <Button type=\"primary\" onClick={() => {\n        dispatch({\n          type: 'CHANGE_IMG',\n          val: img\n        })\n      }}>使用已有图片</Button>\n    </div>\n    <img src={state.img || info.img} alt=\"封面图片\" style={{ height: state.img || info.img ? '100px' : '0px', width: 'auto', visibility: state.img || info.img ? 'visible' : 'hidden', display: 'block' }} />\n    <Select\n      showSearch\n      style={{ width: 200 }}\n      placeholder=\"Select a tag\"\n      optionFilterProp=\"children\"\n      onChange={onChange}\n      filterOption={(input, option) =>\n        (option as any).children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n    >\n      {\n        props.tagsList.map((t: any) => <Option value={`${t.tag_name}$_$${t.id}`} key={t.id}>{t.tag_name}</Option>)\n      }\n    </Select>\n    {\n      state.tags.map((t: any) => <Tag color=\"#2db7f5\" key={t.id} closable onClose={() => { closeTag(t.id) }}>\n        {t.tag_name}\n      </Tag>)\n    }\n    <br />\n    <Select\n      showSearch\n      style={{ width: 200 }}\n      placeholder=\"Select a 分类\"\n      optionFilterProp=\"children\"\n      onChange={onChange1}\n      filterOption={(input, option) =>\n        (option as any).children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n    >\n      {\n        props.ctgList.map((t: any) => <Option value={`${t.category_name}$_$${t.id}`} key={t.id}>{t.category_name}</Option>)\n      }\n    </Select>\n    {\n      state.ctg.name ?\n        <Tag color=\"#2db7f5\" closable onClose={() => { closeCtg() }}>\n          {state.ctg.name || (info.category && info.category.category_name)}\n        </Tag> : ''\n    }\n    <br />\n    <div className=\"flex content\">\n      <div className=\"inner-content\">\n        <TextArea value={state.content || info.content} onChange={(e) => change(e, 'changeContent')} placeholder='文章内容' />\n      </div>\n      <div className=\"inner-content\">\n        <MarkDown source={state.content || info.content} />\n      </div>\n    </div>\n\n  </div>\n}\n\nexport default connect(state => ({ ...state }), {\n  add_tag(val: any) {\n    return { type: 'ADD_TAG', val }\n  },\n  add_ctg(val: any) {\n    return { type: 'ADD_CTG', val }\n  }\n})(withRouter(Write))","import React, { useState, useEffect, useContext } from 'react'\nimport { context } from '@/context'\nimport axios from 'axios'\nimport './index.less'\n\nexport default function Gallary() {\n  const ctxt = useContext(context)\n  const [imgs, setImgs] = useState([])\n  useEffect(() => {\n    axios.get(`${ctxt.host}/files/ls`).then(({ data }) => {\n      setImgs(data.list.map((t: any) => ctxt.host + t.name))\n    })\n  }, [ctxt.host])\n\n  function copy(str: string) {\n    const ipt = document.createElement('input')\n    ipt.value = str\n    document.body.appendChild(ipt)\n    ipt.select()\n    document.execCommand('copy')\n    document.body.removeChild(ipt)\n    ctxt.showToast('拷贝图片地址成功')\n  }\n\n  return <div className=\"gallary-wrap\">\n    <h1>图库</h1>\n    <div className=\"inner-wrap\">\n      {\n        imgs.map((t: string, ind: number) => <div key={ind} className=\"img-wrap\">\n          <img src={t} alt={t} />\n          <br />\n          <span onClick={() => { copy(t) }}>{t}</span>\n        </div>)\n      }\n    </div>\n  </div>\n}","import React, { useContext, useMemo, useCallback } from 'react'\nimport './index.less'\nimport { context } from '@/context'\nimport Layout from '@c/Layout'\nimport dayjs from 'dayjs'\nimport MarkDown from 'react-markdown'\nimport useAxios from '@/common/hooks/useAxios'\n\nfunction ArticleInfo(props: any) {\n  const ctxt = useContext(context)\n\n  const id = useMemo(() => props.match.params.id, [props.match.params.id])\n  const info = useAxios(`${ctxt.host}/articles/${id}`, { content: '', title: '', time: 0, tags: [], category: {} })\n\n  const showTitle = useMemo(() => {\n    let { content } = info\n    return !content.trim().match(/^#\\s/)\n  }, [info])\n\n  const format = useCallback((n: string | number) => {\n    n = +n\n    return dayjs(n).format('YYYY-MM-DD HH:mm')\n  }, [])\n\n  return <Layout>\n    <div className=\"article-info-wrap card-bg\">\n      <h1 style={{ display: showTitle ? 'block' : 'none' }}>{info.title}</h1>\n      <div className=\"notice mb-7\">\n        <span>{format(info.time)}</span>\n        <span onClick={() => { ctxt.jump(props, info.category && info.category.id, 'catagory') }} className=\"link\">{info.category && info.category.category_name}</span>\n      </div>\n      <MarkDown source={info.content} />\n    </div>\n  </Layout>\n}\n\nexport default ArticleInfo\n","import React, { useContext, useEffect, useMemo } from 'react';\nimport Main from '@c/main/Main'\nimport Head from '@c/Head/Head'\nimport Catagory from '@c/category/index'\nimport Tags from '@c/tags/index'\nimport Write from '@c/write/Write'\nimport Gallary from '@c/gallary'\nimport ArticleInfo from '@c/ArticleInfo'\nimport { HashRouter, Route, Redirect, Switch } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport { context } from '@/context'\nimport './App.less';\nimport '@/Main.less'\n\nfunction App(props: any) {\n  const ctxt = useContext(context)\n  const routes = useMemo(() => {\n    return [\n      { path: '/index', cmp: Main },\n      { path: '/catagory/:id', cmp: Catagory },\n      { path: '/tags/:id', cmp: Tags },\n      { path: '/write/:id', cmp: Write },\n      { path: '/pic', cmp: Gallary },\n      { path: '/article/:id', cmp: ArticleInfo }\n    ]\n  }, [])\n\n  useEffect(() => {\n    props.getArticleList(ctxt.host)\n    props.getTagsList(ctxt.host)\n    props.getCtgList(ctxt.host)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <HashRouter>\n      <Head>\n        <span></span>\n      </Head>\n      <div className='app'>\n      <Switch>\n        {\n          routes.map((t: any, ind: number) => <Route path={t.path} component={t.cmp} key={ind} />)\n        }\n        <Redirect exact from='/write' to='/write/0' />\n        <Redirect exact from='/' to='/index' />\n        </Switch>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default connect(\n  (state) => ({ ...state }),\n  {\n    getArticleList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/articles`)\n        dispatch({\n          type: 'GET_ARTICLE_LIST',\n          val: data\n        })\n      }\n    },\n    getTagsList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/tags`)\n        dispatch({\n          type: 'GET_TAGS_LIST',\n          val: data\n        })\n      }\n    },\n    getCtgList(host: string) {\n      return async function (dispatch: any) {\n        const { data } = await axios.get(`${host}/category/count`)\n        dispatch({\n          type: 'GET_CTG_LIST',\n          val: data\n        })\n      }\n    }\n  }\n)(App);\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport './index.less'\n\n//  function (props: any) {\n//   let timer = useRef<any>(null)\n\n//   const [show, setShow] = useState(props.show)\n//   console.log('props.show', props.show)\n//   useEffect(() => {\n//     console.log('show', show)\n//     if (show) {\n//       timer.current = setTimeout(() => {\n//         setShow(false)\n//       }, 2000)\n//     }\n//   }, [show])\n\n//   useEffect(() => {\n//     clearTimeout(timer.current)\n//     timer.current = setTimeout(() => {\n//       setShow(false)\n//     }, 2000)\n//   }, [props.msg])\n\n//   return ReactDOM.createPortal(<div\n//     className=\"toast\" style={{ display: show ? 'block' : 'none' }}\n//   >\n//     {props.msg}\n//   </div>, document.body)\n// }\n\nexport default class Toast extends React.Component<any, any> {\n\n  private timer: any = null\n  constructor(props: any) {\n    super(props)\n    this.state = {\n      show: false,\n      msg: ''\n    }\n    // @ts-ignore \n    Toast.showToast = this.show.bind(this)\n  }\n\n  public show(msg: string) {\n    clearTimeout(this.timer)\n\n    this.setState({\n      show: true,\n      msg\n    }, () => {\n      this.stopTimer()\n    })\n  }\n\n  private stopTimer() {\n    this.timer = setTimeout(() => {\n      this.setState({\n        show: false\n      })\n    }, 2000)\n  }\n\n  render() {\n    return ReactDOM.createPortal(<div\n      className=\"toast\" style={{ display: this.state.show ? 'block' : 'none' }}\n    >\n      {this.state.msg}\n    </div>, document.body)\n  }\n}\n\n/**\n * {\n      React.Children.map(props.children, child => <div>\n          {child}\n        </div>)\n    }\n */","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\n\ninterface Act {\n  type: string;\n  val?: any\n}\n\nconst initalState: any = {\n  count: 1,\n  articleCount: 0,\n  tagsCount: 0,\n  ctgCount: 0,\n  articleList: [],\n  tagsList: [],\n  sortedArticle: [],\n  ctgList: []\n}\n\nfunction reducer(state = initalState, action: Act) {\n  let { type, val } = action\n  let { tagsList, ctgList } = state\n  switch (type) {\n    case 'ADD':\n      return {\n        ...state,\n        count: state.count + 1\n      };\n    case 'GET_ARTICLE_LIST':\n      let sorted = val.list.sort((b: any, a: any) => a.time - b.time).slice(0, 5)\n      return {\n        ...state,\n        articleCount: val.count,\n        articleList: val.list,\n        sortedArticle: sorted,\n      }\n    case 'GET_TAGS_LIST':\n      return {\n        ...state,\n        tagsCount: val.count,\n        tagsList: val.list\n      }\n    case 'ADD_TAG':\n      tagsList.push(val)\n      \n      return {\n        ...state,\n        tagsList: [...tagsList]\n      }\n    case 'GET_CTG_LIST':\n      return {\n        ...state,\n        ctgCount: val.count,\n        ctgList: val.list\n      }\n    case 'ADD_CTG':\n      ctgList.push(val)\n      \n      return {\n        ...state,\n        ctgList: [...ctgList]\n      }\n    default:\n      return state\n  }\n}\n\nexport default createStore(reducer, applyMiddleware(thunk))","import React, { ReactComponentElement, ReactElement, ReactInstance, ReactNode } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Toast from '@c/toast'\nimport * as serviceWorker from './serviceWorker';\nimport { context } from './context'\nimport * as dayjs from 'dayjs'\nimport isLeapYear from 'dayjs/plugin/isLeapYear' // 导入插件\nimport 'dayjs/locale/zh-cn' // 导入本地化语言\nimport duration from 'dayjs/plugin/duration'\nimport { Provider } from 'react-redux'\nimport store from '@/common/global/store'\n\ndayjs.extend(duration)\n\ndayjs.extend(isLeapYear) // 使用插件\ndayjs.locale('zh-cn') // 使用本地化语言\n\nconst con = document.createElement('div')\ncon.id = 'cmp-container'\ndocument.body.appendChild(con)\n\nconst host = process.env.NODE_ENV === 'development' ? 'http://localhost:8090' : 'http://39.96.31.138'\nconst globalData = {\n  host,\n  dayjs,\n  showToast(msg: string) {\n    const cmp: Partial<{ showToast: any } & typeof Toast> = Toast\n    cmp.showToast(msg)\n  },\n  jump(props: any, id: number | string, type: string = 'article') {\n    props.history.push(`/${type}${id !== '' ? '/' + id : ''}`)\n  }\n}\n\nReactDOM.render(\n  <Provider store={store}>\n    <context.Provider value={globalData} >\n      <App />\n    </context.Provider>\n    <Toast />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}